Дипломный проект по профессии «Тестировщик»

Дипломный проект — автоматизация тестирования комплексного сервиса, взаимодействующего с СУБД и API Банка.

***Описание приложения***

**Бизнес-часть**

Приложение — это веб-сервис, который предлагает купить тур по определённой цене двумя способами:

1. Обычная оплата по дебетовой карте.
2. Уникальная технология: выдача кредита по данным банковской карты.

![log](https://github.com/skatt32/diplom/assets/148701884/634e25cd-559c-467e-87a5-1055a2f1b65f)

Само приложение не обрабатывает данные по картам, а пересылает их банковским сервисам:

* сервису платежей, далее Payment Gate;
* кредитному сервису, далее Credit Gate.

Приложение в собственной СУБД должно сохранять информацию о том, успешно ли был совершён платёж и каким способом. Данные карт при этом сохранять не допускается.

_Важно: в реальной жизни приложение не должно пропускать через себя данные карт, если у него нет PCI DSS, но мы сделали именно так ;)_

**Техническая часть**

Само приложение расположено в файле aqa-shop.jar и запускается стандартным способом java -jar aqa-shop.jar на порту 8080.

В файле application.properties приведён ряд типовых настроек:

* учётные данные и URL для подключения к СУБД;
* URL-адреса банковских сервисов.

**СУБД**

Заявлена поддержка двух СУБД. Вы должны это проверить:

* MySQL;
* PostgreSQL.

Учётные данные и URL для подключения задаются в файле application.properties.

**Банковские сервисы**

Доступ к реальным банковским сервисам не даётся, поэтому разработчики подготовили для вас эмулятор банковских сервисов, который может принимать запросы в нужном формате и генерировать ответы.

Эмулятор написан на Node.js, для его запуска рекомендуется использовать Docker. Эмулятор расположен в каталоге gate-simulator.

Эмулятор запускается командой npm start на порту 9999. Он позволяет генерировать предопределённые ответы для заданного набора карт. Набор карт представлен в формате JSON в файле data.json.

Обратите внимание: разработчики сделали один сервис, эмулирующий и Payment Gate, и Credit Gate.

Для формирования окружения рекомендуем запустить три контейнера: c MySQL, с PostgreSQL и эмулятором банковских сервисов. Все три контейнера будет удобным описать в одном файле docker-compose.yml и запускать одновременно.

***Задача***

Ваша ключевая задача — автоматизировать позитивные и негативные сценарии покупки тура.

Задача разбита на 4 этапа:

1. Планирование автоматизации тестирования.
2. Непосредственно сама автоматизация.
3. Подготовка отчётных документов по итогам автоматизированного тестирования.
4. Подготовка отчётных документов по итогам автоматизации.

Все материалы — документы, авто-тесты, открытые issue, отчёты и другие — должны быть размещены в одном публичном репозитории. Ссылку на него вы будете отправлять дипломному руководителю.

**Планирование**

В течение трёх дней с начала работы над дипломом вы должны отправить дипломному руководителю личным сообщением в Discord план автоматизации, в котором описаны:

1. перечень автоматизируемых сценариев;
2. перечень используемых инструментов с обоснованием выбора;
3. перечень и описание возможных рисков при автоматизации;
4. интервальная оценка с учётом рисков в часах;
5. план сдачи работ: когда будут готовы автотесты, результаты их прогона;
6. отчёт по автоматизации: оформляется в виде файла с именем Plan.md и заливается в репозиторий вашего проекта.

**Автоматизация**

На этом этапе вы пишете автотесты и прогоняете их. Требований по подключению CI нет, но есть требования к тестам. Обязательно должны быть:

* UI-тесты;
* репорты — Gradle, Allure, Report Portal;
* запросы в базу, проверяющие корректность внесения информации приложением.

Код автотестов загружается в репозиторий вашего проекта вместе с отчётными документами, файлами и конфигурациями, необходимыми для запуска.

В файле README.md должна быть описана процедура запуска автотестов. Если для запуска нужно заранее установить, настроить, запустить какое-то ПО, то это тоже должно быть описано.

_Важно: если после git clone и выполнения шагов, описанных в README.md, авто-тесты не запускаются, то диплом отправляется на доработку._

***Отчётные документы по итогам тестирования***

**В качестве отчётных документов прикладываются issue со скриншотами и описанием багов, формируется документ Report.md, в котором содержится отчёт о проведённом тестировании:**

* краткое описание;
* количество тест-кейсов;
* процент успешных и не успешных тест-кейсов;
* общие рекомендации.

Не забудьте, что помимо документа в систему автоматизации должны быть интегрированы отчёты: Gradle, Allure или Report Portal.

***Отчётные документы по итогам автоматизации***

**В качестве отчётных документов формируется документ Summary.md, в котором содержится отчёт о проведённой автоматизации:**

* что было запланировано и что реализовано;
* причины, по которым что-то не было реализовано;
* сработавшие риски;
* общий итог по времени: сколько запланировали и сколько выполнили с обоснованием расхождения.

***Подготовка тестового окружения для запуска автотестов***

**Установить приложения**

1. Intelij IDEA 2023.2.4 (Community Edition)
2. Docker Desktop
3. Браузер: Chrome Версия 124.0.6367.208 (Официальная сборка), (64 бит)
Убедитесь, что порты 8080, 9999 и 5432 или 3306 (в зависимости от выбранной базы данных) свободны;

**Процедура запуска тестов**

1. Запускаем Docker Desktop
2. Запускаем IDEA
3. В терминале IDEA набираем docker compose down
4. Ждем удаления 3 контейнеров и набираем docker compose up
5. Ждем запуска контейнеров node-app, mysql, postgres и во 2-ом терминале для
запуска джарника набираем java -jar ./artifacts/aqa-shop.jar
6. В 3-ем терминале запускаем тесты командой ./gradlew clean test --info
7. Для генерации отчетов на Allure после прохождения тестов набираем в терминале ./gradlew allureserve
8. По умолчанию в файле application.properties указано подключение к MySQL://localhost:3306/app.
9. Для замены СУБД на PostgreSQL необходимо заменить строку 3 на
spring.datasource.url=jdbc:postgresql://localhost:5432/app и затем также запусить тесты согласно
пунктам 3-6
10. Для отключения джарника или остановки контейнеров нажать ctrl+C
